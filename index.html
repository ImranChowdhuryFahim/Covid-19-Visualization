

<html>

  <head>
      
      <script src="./d3-lasso.min.js"></script>
      <script src="d3.js"></script>
      <title>COVID-19 Dashboard</title>
      <link rel="stylesheet" href="style.css">
      <script src="script.js"></script>
      <script src="https://ajax.googleapis.com/ajax/libs/jquery/3.4.1/jquery.min.js"></script>
      <link rel="stylesheet" href="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/themes/smoothness/jquery-ui.css">
<script src="https://ajax.googleapis.com/ajax/libs/jqueryui/1.12.1/jquery-ui.min.js"></script>
<script src="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.jquery.min.js"></script>
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/chosen/1.8.7/chosen.min.css">
<link rel="stylesheet" href="//code.jquery.com/ui/1.12.1/themes/base/jquery-ui.css">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/4.7.0/css/font-awesome.min.css">


  </head>
  
  <body>
      <h1>COVID-19 Dashboard</h1>
      <div id="myModal" class="modal">
  
        <!-- Modal content -->
        <div class="modal-content" style="background-color: #2a6592; color:rgb(209, 178, 178);">
          <span class="close">&times;</span>
          <p style="color: white; font-weight: 1em; font-size: 16px; letter-spacing: .3em; ">
            
            <h4>1. To select a single country.</h4> 
              --> select "Bangladesh"
            <h4>2. To select multiple countries.</h4>
            --> select "China","USA",..
            <h4>3. To choose a particular case.</h4>
              --> select/show death/recovered/confirmed cases
            <h4>4. To find minimum/maximum death/recovered/confirmed cases.</h4>
              --> find maximum/minimum death/recovered/confirmed cases
            <h4>5. To select a particular date range.</h4>
            --> from m/d/y to m/d/y
            <h4>6. To find minimum/maximum death/recovered/confirmed cases among some selected countries.</h4>
            --> first select some countries by using lasso/select command then use the find maximum command
            <h4>7. To find minimum/maximum death/recovered/confirmed cases in particular date range.</h4>
            --> first select a date range by using lasso/slider/from to command then use the find maximum command
            <h4>8. To reset or clear the window.</h4>
            --> cls/clear/clear all
          
          </p>
        </div>
      
      </div>
      <div class="result">
        
        <div>
        <input type="text" id="command"  placeholder="Enter Command Here" class="round">
        <i class="fa fa-search" id="search" aria-hidden="true" onclick="command()" ></i>
        <i class="fa fa-microphone"  id="button" aria-hidden="true"></i>
        <!-- <input type="image" id="button" src="image.png" width="20" height="20"> -->
        <!-- <!-- <button onclick="command()">Enter</button> -->
        <i class="fa fa-question-circle fa-2x" aria-hidden="true" id="myBtn"></i>
        <i class="fa fa-refresh fa-2x" aria-hidden="true" id="reset"></i>
        <!-- <button id="myBtn">Supported Commands</button> -->
        </div>
        <!-- //akane print korbi -->
        <div class="res" id="res">Showing Results for All Countries</div> 
        <div class="res1" id="res1"></div>

      </div>
      <div class="info">
              <div class="tc" ></div>
             <div class="tc1"></div>
              <div class="tc2"></div> 
              <div style="border-right:1px dotted #BDBDBD; padding: 0 1em;">
                  <form >
                      <label>Choose Case:</label>
                    <select id="options" name="cars" onchange="ddl()">
                      <option value="confirmed Cases">confirmed Cases</option>
                      <option value="Death Cases">Death Cases</option>
                      <option value="Recovered Cases">Recovered Cases</option>
                      <!-- <option value="New Cases">New Cases</option> -->
                    </select>
                  </form>
                </div>
                <div style="border-right:1px dotted #BDBDBD; padding: 0 1em;">
                  <form >
                      <label>Select Country:</label>
                    <select id="countries" class="chosen" name="countries" onchange="myScript()">
                      
                    </select>
                  </form>
                </div>
                <div>
                    <label for="amount">Date range:</label>
                    <input type="text" id="amount" style="border: 0; color: blue; font-weight: bold; background-color: #DCDCDC;" size="30"/>     
                  <div id="slider-range"></div>
                </div>
      </div>
      <div class="mainView">
          <div id="bar">
              <svg id="BarChart"  style="transform: rotate(90deg)" >
                  
              </svg>
          </div>
          <div>
              <svg id="Map">
                  <g id="G"></g>
              </svg>
          </div>
          <div>
              <div> 
                <svg id="container" height="450px" width="500px"> 
                  <g id="body2" style="transform: translate(60px,10px);margin-top:50px ;"></g>
              </svg>
              </div>
              <div id="tooltip"></div>
              <div style="transform: translate(190px,-250px);margin-top:50px ;"></div>
            


          </div>
          
          
  
      </div>
      
      
  
  </body>
  <script>
      

//end

//////pop up/////
var modal = document.getElementById("myModal");

// Get the button that opens the modal
var btn = document.getElementById("myBtn");

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

var reset=document.getElementById("reset");

var input = document.getElementById("command");

// Execute a function when the user releases a key on the keyboard
input.addEventListener("keyup", function(event) {
// Number 13 is the "Enter" key on the keyboard
if (event.keyCode === 13) {
  // Cancel the default action, if needed
  event.preventDefault();
  // Trigger the button element with a click
  command()
}
});

// When the user clicks the button, open the modal 
btn.onclick = function() {
  modal.style.display = "block";
}

// When the user clicks on <span> (x), close the modal
span.onclick = function() {
  modal.style.display = "none";
}

reset.onclick = function(){

     
  cls();     
          
     
}

// When the user clicks anywhere outside of the modal, close it
window.onclick = function(event) {
  if (event.target == modal) {
    modal.style.display = "none";
  }
}
///end  pop up/////



//////voice recognition ///////


var SpeechRecognition = SpeechRecognition || webkitSpeechRecognition;
var SpeechGrammarList = SpeechGrammarList || webkitSpeechGrammarList;

var grammar = '#JSGF V1.0;'

var recognition = new SpeechRecognition();
var speechRecognitionList = new SpeechGrammarList();
speechRecognitionList.addFromString(grammar, 1);
recognition.grammars = speechRecognitionList;
recognition.lang = 'en-US';
recognition.interimResults = false;

recognition.onresult = function(event) {
    var last = event.results.length - 1;
    var command1 = event.results[last][0].transcript;
   // message.textContent = 'Voice Input: ' + command + '.';
   

   let str=command1.toLowerCase()
   if(str.includes("depth"))
   {
     str=str.replace("depth","death")
   }
   if(str.includes("conference"))str=str.replace("conference","confirmed")
   if(str.includes("sylhet"))str=str.replace("sylhet","select")
   if(str.includes("so"))str=str.replace("so","show")

   
   
   if(str.includes("select") && !(/death|recovered|confirmed/).test(str))
   {
     
     str=str.replace(/[ ,]+/g, ",").trim(" ")
     str=str.replaceAt(6," ");
    
     
   }

   document.querySelector('#command').value=str

   command()
   

};


recognition.onspeechend = function() {
    recognition.stop();
    // setTimeout(function(){ recognition.start(); }, 400);
};

recognition.onerror = function(event) {
    message.textContent = 'Error occurred in recognition: ' + event.error;
}        


document.querySelector('#button').addEventListener('click', function(){
  recognition.start();
})


String.prototype.replaceAt=function(index, replacement) {
    return this.substr(0, index) + replacement+ this.substr(index + replacement.length);
}

//end of voice recogition


      </script>
  </html>

